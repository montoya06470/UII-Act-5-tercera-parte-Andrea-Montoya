{% extends 'base.html' %}
{% block content %}
<div class="card shadow-lg mt-4">
    <div class="card-header bg-warning text-dark">
        <h3>Editar Venta #{{ venta.id }}</h3>
    </div>
    <div class="card-body p-4">
        <form method="post" action="{% url 'realizar_actualizacion_venta' venta.id %}">
            {% csrf_token %}
            <div class="row g-3">
                <div class="col-md-6">
                    <label>Cliente</label>
                    <input type="text" name="cliente" class="form-control" value="{{ venta.cliente }}" required>
                </div>
                <div class="col-md-6">
                    <label>Total</label>
                    <input type="number" step="0.01" name="total" class="form-control" value="{{ venta.total }}" required>
                </div>
                <div class="col-md-6">
                    <label>MÃ©todo de pago</label>
                    <select name="metodo_pago" class="form-select">
                        <option value="efectivo" {% if venta.metodo_pago == 'efectivo' %}selected{% endif %}>Efectivo</option>
                        <option value="tarjeta" {% if venta.metodo_pago == 'tarjeta' %}selected{% endif %}>Tarjeta</option>
                        <option value="transferencia" {% if venta.metodo_pago == 'transferencia' %}selected{% endif %}>Transferencia</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label>Sucursal</label>
                    <select name="sucursal" class="form-select">
                        <option value="Sucursal 1" {% if venta.sucursal == 'Sucursal 1' %}selected{% endif %}>Sucursal 1</option>
                        <option value="Sucursal 2" {% if venta.sucursal == 'Sucursal 2' %}selected{% endif %}>Sucursal 2</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label>Empleado</label>
                    <input type="text" name="empleado" class="form-control" value="{{ venta.empleado }}" required>
                </div>
                <div class="col-12">
                    <label>Productos (Ctrl + clic para seleccionar varios)</label>
                    <select name="productos" multiple class="form-select" size="6">
                        {% for prod in productos %}
                        <option value="{{ prod.id }}" 
                            {% if prod in venta.productos.all %}selected{% endif %}>
                            {{ prod.nombre }} - ${{ prod.precio }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="mt-4">
                <button type="submit" class="btn btn-warning btn-lg">Actualizar Venta</button>
                <a href="{% url 'ver_ventas' %}" class="btn btn-secondary btn-lg">Cancelar</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}